(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){e.exports=a(312)},161:function(e,t,a){},312:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(27),c=a.n(r),i=(a(161),a(163),a(155)),o=a(9),m=a(42),s=a.n(m),u=a(102),d=a.n(u);a(238),a(241);d.a.initializeApp({apiKey:"AIzaSyCPexi8M8FFjmqjtoBTp3HJJiHwyk03S5M",authDomain:"report-manager-e3067.firebaseapp.com",databaseURL:"https://report-manager-e3067.firebaseio.com",projectId:"report-manager-e3067",storageBucket:"report-manager-e3067.appspot.com",messagingSenderId:"957180191625"});var E=d.a,p=Object(n.createContext)([null,function(){}]),b=Object(n.createContext)([null,function(){}]),f=(Object(n.createContext)([null,function(){}]),a(123)),h=a(91),g=a(77),v=a(150),y=a.n(v),O=a(25),j=a.n(O),x=a(35),C=a.n(x),S=a(151),N=a.n(S),w=function(){var e=Object(n.useContext)(p),t=Object(o.a)(e,2)[1];return l.a.createElement(y.a,{bg:"secondary",sticky:"top",variant:"dark"},l.a.createElement(j.a,null,l.a.createElement(N.a,{id:"SUNRXS",title:"SUNRXS",variant:"secondary",size:"sm"},l.a.createElement(C.a.Header,null,"Pages"),l.a.createElement(g.LinkContainer,{exact:!0,to:"/",activeClassName:"selected"},l.a.createElement(C.a.Item,{as:"button"},"Dashboard")),l.a.createElement(g.LinkContainer,{exact:!0,to:"/incidents/",activeClassName:"selected"},l.a.createElement(C.a.Item,{as:"button"},"Incidents")),l.a.createElement(g.LinkContainer,{exact:!0,to:"/new_incident/",activeClassName:"selected"},l.a.createElement(C.a.Item,{as:"button"},"New Incident")),l.a.createElement(C.a.Divider,null),l.a.createElement(C.a.Header,null,"Me"),l.a.createElement(C.a.Item,{as:"button",onClick:function(){return E.auth().signOut().then(function(){return t(null)}).catch(function(e){return console.log(e.code,e.message)})}},"Sign Out"))))},I=a(39),z=a.n(I),T=a(3),L=a.n(T),D=a(43),k=a.n(D),M=a(101),A=a.n(M),F=a(17),R=a.n(F),U=a(40),G=a.n(U),q=a(22),B=a.n(q),W=a(26),H=a.n(W),P=a(154),J=a.n(P),X=a(19),Y=a.n(X),_=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=e.data,m=i.application,s=i.startText,u=i.impact,d=i.description,E=i.end,p=i.endText,b=i.actions;return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{variant:"info",size:"sm",className:"mr-2",onClick:function(){return c(!0)}},"More"),l.a.createElement(Y.a,{show:r,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return c(!1)}},l.a.createElement(Y.a.Header,{closeButton:!0},l.a.createElement(Y.a.Title,null,"More")),l.a.createElement(Y.a.Body,null,l.a.createElement(H.a,{className:"border-0"},l.a.createElement(H.a.Body,null,l.a.createElement(H.a.Title,null,m),l.a.createElement("small",{className:"text-muted"},s),l.a.createElement(H.a.Text,null,u),l.a.createElement(H.a.Text,null,l.a.createElement("small",{className:"text-muted"},d)),E?l.a.createElement("small",{className:"text-muted"},"Resolved ",p):l.a.createElement("small",{className:"text-muted"},"Open"),l.a.createElement(H.a.Text,null,b))))))},K=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),s=m[0],u=m[1],d=Object(n.useRef)(null);return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{variant:"secondary",size:"sm",onClick:function(){return c(!0)}},"Update"),l.a.createElement(Y.a,{show:r,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return c(!1)}},l.a.createElement(Y.a.Header,{closeButton:!0},l.a.createElement(Y.a.Title,null,"New Update")),l.a.createElement(Y.a.Body,null,l.a.createElement(L.a,{className:"needs-validation"},l.a.createElement(k.a,null,l.a.createElement(k.a.Prepend,null,l.a.createElement(k.a.Text,null,"Update")),l.a.createElement(L.a.Control,{type:"text",ref:d,onChange:function(e){return u(e.target.value)},required:!0})),l.a.createElement(Y.a.Footer,null,l.a.createElement(R.a,{variant:"primary",size:"sm",type:"submit",onClick:function(t){t.preventDefault();var a=e.data;a.actions="".concat(a.actions,". ").concat(s),E.database().ref().child("incidents").child(a.id).set(a),d.current.value="",console.log(a),c(!1)}},"Save changes"))))))},Q=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(e.data.application),m=Object(o.a)(i,2),s=m[0],u=m[1],d=Object(n.useState)(e.data.description),p=Object(o.a)(d,2),b=p[0],f=p[1],h=Object(n.useState)(e.data.priority),g=Object(o.a)(h,2),v=g[0],y=g[1],O=Object(n.useState)(e.data.resolver),j=Object(o.a)(O,2),x=j[0],C=j[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{variant:"danger",size:"sm",onClick:function(){return c(!0)}},"Edit"),l.a.createElement(Y.a,{show:r,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return c(!1)}},l.a.createElement(Y.a.Header,{closeButton:!0},l.a.createElement(Y.a.Title,null,"Edit")),l.a.createElement(Y.a.Body,null,l.a.createElement(L.a,{className:"needs-validation",onSubmit:function(t){t.preventDefault();var a=e.data;a.application=s,a.description=b,a.priority=v,a.resolver=x,E.database().ref().child("incidents").child(a.id).set(a),c(!1)}},l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Affected Application"),l.a.createElement(L.a.Control,{type:"text",size:"sm",placeholder:"Which application/s have been impacted.",value:s,onChange:function(e){return u(e.target.value)},required:!0})),l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Issue Cause"),l.a.createElement(L.a.Control,{type:"text",size:"sm",placeholder:"Fully detail the cause of the issue.",value:b,onChange:function(e){return f(e.target.value)},required:!0})),l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Priority of Impact"),l.a.createElement(L.a.Control,{as:"select",size:"sm",value:v,onChange:function(e){return y(e.target.value)}},l.a.createElement("option",{value:"1-Extensive/Widespread"},"1-Extensive/Widespread"),l.a.createElement("option",{value:"2-Significant/Large"},"2-Significant/Large"),l.a.createElement("option",{value:"3-Moderate/Limited"},"3-Moderate/Limited"))),l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Resolver"),l.a.createElement(L.a.Control,{type:"text",size:"sm",placeholder:"Who is working on the issue.",value:x,onChange:function(e){return C(e.target.value)},required:!0})),l.a.createElement(Y.a.Footer,null,l.a.createElement(R.a,{type:"submit",variant:"primary",size:"sm"},"Submit"))))))},V=function(e){var t=e.data,a=t.application,n=t.description,r=t.impact,c=t.startText,i=t.end,o=t.outageText;return l.a.createElement(H.a,{className:"border-0"},l.a.createElement(H.a.Body,null,l.a.createElement(H.a.Title,null,a),l.a.createElement("small",{className:"text-muted"},c),l.a.createElement(H.a.Text,null,r,l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},o)),l.a.createElement(H.a.Text,null,l.a.createElement("small",{className:"text-muted"},n)),l.a.createElement(_,{data:e.data}),l.a.createElement(J.a,{"aria-label":"Item options"},l.a.createElement(K,{data:e.data}),l.a.createElement(Q,{data:e.data}),i?null:l.a.createElement(R.a,{variant:"success",size:"sm",onClick:function(){var t=e.data;t.end="".concat(new Date),E.database().ref().child("incidents").child(t.id).set(t)}},"Resolve"))))},Z=function(){var e=Object(n.useContext)(b),t=e.incidents,a=e.setIncidents,r=Object(n.useRef)("");return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{fluid:!0,className:"mb-5 text-light bg-secondary"},l.a.createElement(j.a,null,l.a.createElement("h1",{className:"display-4"},"Incidents"),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("div",{className:"float-sm-right"},l.a.createElement(L.a,null,l.a.createElement(k.a,null,l.a.createElement(A.a,{size:"sm",placeholder:"Search application","aria-label":"Search",ref:r,onChange:function(e){if(""!==e.target.value){var n=t?t.filter(function(t){var a=t.application.toUpperCase(),n=e.target.value.toUpperCase();return a.toUpperCase().indexOf(n)>-1?t:null}):t;a(n)}}}),l.a.createElement(k.a.Append,null,l.a.createElement(R.a,{size:"sm",variant:"success",onClick:function(){E.database().ref().child("incidents").on("value",function(e){var t=Object.values(e.val());a(t),r.current.value=""})}},"Reset"))))))),l.a.createElement(j.a,null,l.a.createElement(G.a,{className:"mb-5"},t?t.map(function(e){return l.a.createElement(B.a,{lg:4,md:6,key:e.id,className:"animated zoomIn faster"},l.a.createElement(V,{data:e}))}):null)))},$=function(e){var t=Object(n.useState)("Under investigation"),a=Object(o.a)(t,1)[0],r=Object(n.useState)("".concat(new Date)),c=Object(o.a)(r,1)[0],i=Object(n.useState)("2-Significant/Large"),m=Object(o.a)(i,2),s=m[0],u=m[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),b=p[0],f=p[1],h=Object(n.useState)(""),g=Object(o.a)(h,2),v=g[0],y=g[1],O=Object(n.useState)(""),x=Object(o.a)(O,2),C=x[0],S=x[1],N=Object(n.useState)(""),w=Object(o.a)(N,2),I=w[0],T=w[1],D=Object(n.useState)(""),k=Object(o.a)(D,2),M=k[0],A=k[1],F=Object(n.useRef)(null);return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{fluid:!0,className:"mb-5 text-light bg-secondary"},l.a.createElement(j.a,null,l.a.createElement("h1",{className:"display-4"},"New Incident"))),l.a.createElement(j.a,null,l.a.createElement(L.a,{ref:F,className:"needs-validation",onSubmit:function(t){t.preventDefault();var n="INC".concat((new Date).getTime()),l={id:n,impact:b,application:v,description:C,priority:s,reporter:I,resolver:M,start:c,actions:a};F.current.reset(),E.database().ref().child("incidents").child(n).set(l,function(t){return t?console.log(t):e.history.push("/incidents")})}},l.a.createElement(G.a,null,l.a.createElement(B.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Business Impact"),l.a.createElement(L.a.Control,{type:"text",size:"sm",placeholder:"Summarise current impact to business.",onChange:function(e){return f(e.target.value)},required:!0}))),l.a.createElement(B.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Affected Application"),l.a.createElement(L.a.Control,{type:"text",size:"sm",placeholder:"Which application/s have been impacted.",onChange:function(e){return y(e.target.value)},required:!0}))),l.a.createElement(B.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Issue Cause"),l.a.createElement(L.a.Control,{type:"text",size:"sm",placeholder:"Fully detail the cause of the issue.",onChange:function(e){return S(e.target.value)},required:!0}))),l.a.createElement(B.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(L.a.Group,{className:"w-75"},l.a.createElement(L.a.Label,null,"Priority of Impact"),l.a.createElement(L.a.Control,{as:"select",size:"sm",onChange:function(e){return u(e.target.value)}},l.a.createElement("option",{value:"2-Significant/Large"},"2-Significant/Large"),l.a.createElement("option",{value:"1-Extensive/Widespread"},"1-Extensive/Widespread"),l.a.createElement("option",{value:"3-Moderate/Limited"},"3-Moderate/Limited")))),l.a.createElement(B.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Reporter"),l.a.createElement(L.a.Control,{type:"text",size:"sm",placeholder:"Who reported the issue.",onChange:function(e){return T(e.target.value)},required:!0}))),l.a.createElement(B.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Resolver"),l.a.createElement(L.a.Control,{type:"text",size:"sm",placeholder:"Who is working on the issue.",onChange:function(e){return A(e.target.value)},required:!0})))),l.a.createElement(R.a,{variant:"primary",type:"submit",size:"sm",className:"mt-5 mb-5 animated zoomIn faster"},"Submit"))))},ee=a(104),te=a.n(ee),ae=a(105),ne=a.n(ae),le=a(106),re=a.n(le),ce=function(){var e=Object(n.useContext)(b),t=e.incidents,a=e.monthly,r={chart:{type:"areaspline"},title:{text:"Monthly Impact"},legend:{enabled:!1},xAxis:{categories:a.map(function(e){return e.name})},yAxis:{title:{text:null},tickAmount:3,labels:{formatter:function(){return"".concat(s.a.duration(this.value,"milliseconds").humanize())}}},tooltip:{formatter:function(){return"<b>".concat(this.x,"</b> Impact: <b>").concat(s.a.duration(this.y,"milliseconds").humanize(),"</b>")}},series:[{data:a.map(function(e){return e.out})}]},c={chart:{type:"pie"},title:{text:"Recent Activity"},tooltip:{formatter:function(){return"<b>".concat(this.key,"</b> Impact: <b>").concat(s.a.duration(this.y,"milliseconds").humanize(),"</b>")}},series:[{name:"Impact",data:t.slice(0,7).map(function(e){return{name:e.application,y:e.totalOut}})}]};return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{fluid:!0,className:"mb-5 text-light bg-secondary"},l.a.createElement(j.a,null,l.a.createElement("h1",{className:"display-4"},"Dashboard"))),l.a.createElement(j.a,null,t?l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,{className:"mb-5 mt-5"},l.a.createElement(B.a,{lg:8},l.a.createElement(ne.a,{highcharts:te.a,options:c}),l.a.createElement("div",{className:"mt-5"},l.a.createElement(ne.a,{highcharts:te.a,options:r}))),l.a.createElement(B.a,{lg:4,className:"animated zoomIn faster"},l.a.createElement(re.a,null,t.slice(0,7).map(function(e,t){return l.a.createElement(re.a.Item,{key:t},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("h6",{className:"mb-1"},t+1,". ",e.application)),l.a.createElement("small",null,e.startText),l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},e.outageText))}))))):null))},ie=function(){var e=Object(n.useContext)(p),t=Object(o.a)(e,2)[1],a=Object(n.useState)("We'll never share your email with anyone else."),r=Object(o.a)(a,2),c=r[0],i=r[1],m=Object(n.useState)("text-muted"),s=Object(o.a)(m,2),u=s[0],d=s[1],b=Object(n.useState)(""),f=Object(o.a)(b,2),h=f[0],g=f[1],v=Object(n.useState)(""),y=Object(o.a)(v,2),O=y[0],x=y[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(z.a,{className:"mb-5"},l.a.createElement(j.a,null,l.a.createElement("h1",{className:"display-4"},"SUNRXS"),l.a.createElement("p",{className:"lead"},"Report Management Tool"),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("p",null,"Use the below form to login into your account."))),l.a.createElement(j.a,null,l.a.createElement(L.a,{onSubmit:function(e){e.preventDefault(),E.auth().signInWithEmailAndPassword(h,O).then(function(e){return t(e)}).catch(function(e){i(e.message),d("text-danger")})}},l.a.createElement(G.a,null,l.a.createElement(B.a,{lg:4,md:6},l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Email address"),l.a.createElement(L.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:function(e){return g(e.target.value)},required:!0}),l.a.createElement(L.a.Text,{className:"".concat(u)},c))),l.a.createElement(B.a,{lg:4,md:6},l.a.createElement(L.a.Group,null,l.a.createElement(L.a.Label,null,"Password"),l.a.createElement(L.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:function(e){return x(e.target.value)},required:!0})))),l.a.createElement(R.a,{type:"submit",variant:"primary",size:"sm",className:"mt-5 mb-5"},"Login"))))};c.a.render(l.a.createElement(function(e){var t=e.children,a=Object(n.useState)(null),r=Object(o.a)(a,2),c=r[0],i=r[1];return Object(n.useEffect)(function(){return E.auth().onAuthStateChanged(function(e){i(e||null)})}),l.a.createElement(p.Provider,{value:[c,i]},t)},null,l.a.createElement(function(e){var t=e.children,a=Object(n.useState)([{actions:"loading",application:"loading",description:"loading",end:"Jun 1 2019 5:07:00 GMT+0200 (SAST)",id:"INC1554937984145",impact:"loading",priority:"loading",reporter:"loading",resolver:"loading",start:"Jun 1 2019 5:07:00 GMT+0200 (SAST)"}]),r=Object(o.a)(a,2),c=r[0],m=r[1],u=Object(n.useState)([]),d=Object(o.a)(u,2),p=d[0],f=d[1],h=[{name:"Jan",out:0},{name:"Feb",out:0},{name:"Mar",out:0},{name:"Apr",out:0},{name:"May",out:0},{name:"Jun",out:0},{name:"Jul",out:0},{name:"Aug",out:0},{name:"Sep",out:0},{name:"Oct",out:0},{name:"Nov",out:0},{name:"Dec",out:0}];return Object(n.useEffect)(function(){return E.database().ref().child("incidents").on("value",function(e){var t=Object.values(e.val());(t=t.map(function(e){var t,a,n="Open",l=0,r=new s.a(new Date(e.end)),c=new s.a(new Date(e.start)),o={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},m=new Date(Date.parse(e.start));t=m.toLocaleDateString("en-US",o),a=new Date(Date.parse(e.end)).toLocaleDateString("en-US",o);var u=new Date((new Date).setFullYear((new Date).getFullYear()-1));return e.end?(l=function(e,t){var a=new Date(t).getTime(),n=new Date(e).getTime();return Math.floor(a-n)}(e.start,e.end),n="Resolved ".concat(r.from(c)),m>u&&(h[m.getMonth()].out+=l)):n="Open",Object(i.a)({},e,{outageText:n,startText:t,endText:a,totalOut:l})})).sort(function(e,t){return e.id<t.id?1:-1}),m(t);for(var a=(new Date).getMonth(),n=h,l=0;l<a+1;l++)n.push(n.shift());f(n.reverse())})},[]),l.a.createElement(b.Provider,{value:{incidents:c,setIncidents:m,monthly:p}},t)},null,l.a.createElement(function(){var e=Object(n.useContext)(p);return Object(o.a)(e,1)[0]?l.a.createElement(f.a,null,l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement("div",{className:"animated fadeInUp faster"},l.a.createElement(h.a,{exact:!0,path:"/",strict:!0,component:ce}),l.a.createElement(h.a,{exact:!0,path:"/incidents/",strict:!0,component:Z}),l.a.createElement(h.a,{exact:!0,path:"/new_incident/",strict:!0,component:$})))):l.a.createElement(ie,null)},null))),document.getElementById("root"))}},[[156,2,1]]]);
//# sourceMappingURL=main.c57466f4.chunk.js.map