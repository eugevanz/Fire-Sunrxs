(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(e,a,t){e.exports=t(311)},160:function(e,a,t){},311:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(27),c=t.n(r),i=(t(160),t(162),t(154)),o=t(8),s=t(42),m=t.n(s),u=t(102),d=t.n(u);t(237),t(240);d.a.initializeApp({apiKey:"AIzaSyCPexi8M8FFjmqjtoBTp3HJJiHwyk03S5M",authDomain:"report-manager-e3067.firebaseapp.com",databaseURL:"https://report-manager-e3067.firebaseio.com",projectId:"report-manager-e3067",storageBucket:"report-manager-e3067.appspot.com",messagingSenderId:"957180191625"});var E=d.a,p=Object(n.createContext)([null,function(){}]),b=Object(n.createContext)([null,function(){}]),f=t(122),g=t(91),v=t(77),h=t(149),y=t.n(h),O=t(25),j=t.n(O),x=t(35),N=t.n(x),C=t(150),S=t.n(C),w=function(){var e=Object(n.useContext)(p),a=Object(o.a)(e,2)[1];return l.a.createElement(y.a,{bg:"secondary",sticky:"top",variant:"dark"},l.a.createElement(j.a,null,l.a.createElement(S.a,{id:"SUNRXS",title:"SUNRXS",variant:"secondary",size:"sm"},l.a.createElement(N.a.Header,null,"Pages"),l.a.createElement(v.LinkContainer,{exact:!0,to:"/",activeClassName:"selected"},l.a.createElement(N.a.Item,{as:"button"},"Dashboard")),l.a.createElement(v.LinkContainer,{exact:!0,to:"/incidents/",activeClassName:"selected"},l.a.createElement(N.a.Item,{as:"button"},"Incidents")),l.a.createElement(v.LinkContainer,{exact:!0,to:"/new_incident/",activeClassName:"selected"},l.a.createElement(N.a.Item,{as:"button"},"New Incident")),l.a.createElement(N.a.Divider,null),l.a.createElement(N.a.Header,null,"Me"),l.a.createElement(N.a.Item,{as:"button",onClick:function(){return E.auth().signOut().then(function(){return a(null)}).catch(function(e){return console.log(e.code,e.message)})}},"Sign Out"))))},z=t(39),I=t.n(z),L=t(3),T=t.n(L),k=t(43),D=t.n(k),A=t(101),M=t.n(A),R=t(17),B=t.n(R),F=t(40),G=t.n(F),U=t(22),P=t.n(U),q=t(26),W=t.n(q),H=t(153),J=t.n(H),X=t(19),Y=t.n(X),_=function(e){var a=Object(n.useState)(!1),t=Object(o.a)(a,2),r=t[0],c=t[1],i=e.data,s=i.application,m=i.startText,u=i.impact,d=i.description,E=i.end,p=i.endText,b=i.actions;return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{variant:"info",size:"sm",className:"mr-2",onClick:function(){return c(!0)}},"More"),l.a.createElement(Y.a,{show:r,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return c(!1)}},l.a.createElement(Y.a.Header,{closeButton:!0},l.a.createElement(Y.a.Title,null,"More")),l.a.createElement(Y.a.Body,null,l.a.createElement(W.a,{className:"border-0"},l.a.createElement(W.a.Body,null,l.a.createElement(W.a.Title,null,s),l.a.createElement("small",{className:"text-muted"},m),l.a.createElement(W.a.Text,null,u),l.a.createElement(W.a.Text,null,l.a.createElement("small",{className:"text-muted"},d)),E?l.a.createElement("small",{className:"text-muted"},"Resolved ",p):l.a.createElement("small",{className:"text-muted"},"Open"),l.a.createElement(W.a.Text,null,b))))))},K=function(e){var a=Object(n.useState)(!1),t=Object(o.a)(a,2),r=t[0],c=t[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),m=s[0],u=s[1],d=Object(n.useRef)(null);return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{variant:"secondary",size:"sm",onClick:function(){return c(!0)}},"Update"),l.a.createElement(Y.a,{show:r,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return c(!1)}},l.a.createElement(Y.a.Header,{closeButton:!0},l.a.createElement(Y.a.Title,null,"New Update")),l.a.createElement(Y.a.Body,null,l.a.createElement(T.a,{className:"needs-validation"},l.a.createElement(D.a,null,l.a.createElement(D.a.Prepend,null,l.a.createElement(D.a.Text,null,"Update")),l.a.createElement(T.a.Control,{type:"text",ref:d,onChange:function(e){return u(e.target.value)},required:!0})),l.a.createElement(Y.a.Footer,null,l.a.createElement(B.a,{variant:"primary",size:"sm",type:"submit",onClick:function(a){a.preventDefault();var t=e.data;t.actions="".concat(t.actions,". ").concat(m),E.database().ref().child("incidents").child(t.id).set(t),d.current.value="",console.log(t),c(!1)}},"Save changes"))))))},Q=function(e){var a=Object(n.useState)(!1),t=Object(o.a)(a,2),r=t[0],c=t[1],i=Object(n.useState)(e.data.application),s=Object(o.a)(i,2),m=s[0],u=s[1],d=Object(n.useState)(e.data.description),p=Object(o.a)(d,2),b=p[0],f=p[1],g=Object(n.useState)(e.data.priority),v=Object(o.a)(g,2),h=v[0],y=v[1],O=Object(n.useState)(e.data.resolver),j=Object(o.a)(O,2),x=j[0],N=j[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(B.a,{variant:"danger",size:"sm",onClick:function(){return c(!0)}},"Edit"),l.a.createElement(Y.a,{show:r,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,onHide:function(){return c(!1)}},l.a.createElement(Y.a.Header,{closeButton:!0},l.a.createElement(Y.a.Title,null,"Edit")),l.a.createElement(Y.a.Body,null,l.a.createElement(T.a,{className:"needs-validation",onSubmit:function(a){a.preventDefault();var t=e.data;t.application=m,t.description=b,t.priority=h,t.resolver=x,E.database().ref().child("incidents").child(t.id).set(t),c(!1)}},l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Affected Application"),l.a.createElement(T.a.Control,{type:"text",size:"sm",placeholder:"Which application/s have been impacted.",value:m,onChange:function(e){return u(e.target.value)},required:!0})),l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Issue Cause"),l.a.createElement(T.a.Control,{type:"text",size:"sm",placeholder:"Fully detail the cause of the issue.",value:b,onChange:function(e){return f(e.target.value)},required:!0})),l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Priority of Impact"),l.a.createElement(T.a.Control,{as:"select",size:"sm",value:h,onChange:function(e){return y(e.target.value)}},l.a.createElement("option",{value:"1-Extensive/Widespread"},"1-Extensive/Widespread"),l.a.createElement("option",{value:"2-Significant/Large"},"2-Significant/Large"),l.a.createElement("option",{value:"3-Moderate/Limited"},"3-Moderate/Limited"))),l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Resolver"),l.a.createElement(T.a.Control,{type:"text",size:"sm",placeholder:"Who is working on the issue.",value:x,onChange:function(e){return N(e.target.value)},required:!0})),l.a.createElement(Y.a.Footer,null,l.a.createElement(B.a,{type:"submit",variant:"primary",size:"sm"},"Submit"))))))},V=function(e){var a=e.data,t=a.application,n=a.description,r=a.impact,c=a.startText,i=a.end,o=a.outageText;return l.a.createElement(W.a,{className:"border-0"},l.a.createElement(W.a.Body,null,l.a.createElement(W.a.Title,null,t),l.a.createElement("small",{className:"text-muted"},c),l.a.createElement(W.a.Text,null,r,l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},o)),l.a.createElement(W.a.Text,null,l.a.createElement("small",{className:"text-muted"},n)),l.a.createElement(_,{data:e.data}),l.a.createElement(J.a,{"aria-label":"Item options"},l.a.createElement(K,{data:e.data}),l.a.createElement(Q,{data:e.data}),i?null:l.a.createElement(B.a,{variant:"success",size:"sm",onClick:function(){var a=e.data;a.end="".concat(new Date),E.database().ref().child("incidents").child(a.id).set(a)}},"Resolve"))))},Z=function(){var e=Object(n.useContext)(b),a=Object(o.a)(e,2),t=a[0],r=a[1],c=Object(n.useRef)("");return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{fluid:!0,className:"mb-5 text-light bg-secondary"},l.a.createElement(j.a,null,l.a.createElement("h1",{className:"display-4"},"Incidents"),l.a.createElement("p",{className:"lead"},"/\u02c8\u026ans\u026ad(\u0259)nt/ 1. An instance of something happening; an event or occurrence."),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("div",{className:"float-sm-right"},l.a.createElement(T.a,null,l.a.createElement(D.a,null,l.a.createElement(M.a,{size:"sm",placeholder:"Search application","aria-label":"Search",ref:c,onChange:function(e){if(""!==e.target.value){var a=t?t.filter(function(a){var t=a.application.toUpperCase(),n=e.target.value.toUpperCase();return t.toUpperCase().indexOf(n)>-1?a:null}):t;r(a.reverse())}}}),l.a.createElement(D.a.Append,null,l.a.createElement(B.a,{size:"sm",variant:"success",onClick:function(){E.database().ref().child("incidents").on("value",function(e){var a=Object.values(e.val());r(a.reverse()),c.current.value=""})}},"Reset"))))))),l.a.createElement(j.a,null,l.a.createElement(G.a,{className:"mb-5"},t?t.reverse().map(function(e){return l.a.createElement(P.a,{lg:4,md:6,key:e.id,className:"animated zoomIn faster"},l.a.createElement(V,{data:e}))}):null)))},$=function(e){var a=Object(n.useState)("Under investigation"),t=Object(o.a)(a,1)[0],r=Object(n.useState)("".concat(new Date)),c=Object(o.a)(r,1)[0],i=Object(n.useState)("2-Significant/Large"),s=Object(o.a)(i,2),m=s[0],u=s[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),b=p[0],f=p[1],g=Object(n.useState)(""),v=Object(o.a)(g,2),h=v[0],y=v[1],O=Object(n.useState)(""),x=Object(o.a)(O,2),N=x[0],C=x[1],S=Object(n.useState)(""),w=Object(o.a)(S,2),z=w[0],L=w[1],k=Object(n.useState)(""),D=Object(o.a)(k,2),A=D[0],M=D[1],R=Object(n.useRef)(null);return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{fluid:!0,className:"mb-5 text-light bg-secondary"},l.a.createElement(j.a,null,l.a.createElement("h1",{className:"display-4"},"New Incident"),l.a.createElement("p",{className:"lead"},"/nju\u02d0/ 1. Produced, introduced, or discovered recently or now for the first time; not existing before."),l.a.createElement("hr",{className:"my-4"}))),l.a.createElement(j.a,null,l.a.createElement(T.a,{ref:R,className:"needs-validation",onSubmit:function(a){a.preventDefault();var n="INC".concat((new Date).getTime()),l={id:n,impact:b,application:h,description:N,priority:m,reporter:z,resolver:A,start:c,actions:t};R.current.reset(),E.database().ref().child("incidents").child(n).set(l,function(a){return a?console.log(a):e.history.push("/incidents")})}},l.a.createElement(G.a,null,l.a.createElement(P.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Business Impact"),l.a.createElement(T.a.Control,{type:"text",size:"sm",placeholder:"Summarise current impact to business.",onChange:function(e){return f(e.target.value)},required:!0}))),l.a.createElement(P.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Affected Application"),l.a.createElement(T.a.Control,{type:"text",size:"sm",placeholder:"Which application/s have been impacted.",onChange:function(e){return y(e.target.value)},required:!0}))),l.a.createElement(P.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Issue Cause"),l.a.createElement(T.a.Control,{type:"text",size:"sm",placeholder:"Fully detail the cause of the issue.",onChange:function(e){return C(e.target.value)},required:!0}))),l.a.createElement(P.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(T.a.Group,{className:"w-75"},l.a.createElement(T.a.Label,null,"Priority of Impact"),l.a.createElement(T.a.Control,{as:"select",size:"sm",onChange:function(e){return u(e.target.value)}},l.a.createElement("option",{value:"2-Significant/Large"},"2-Significant/Large"),l.a.createElement("option",{value:"1-Extensive/Widespread"},"1-Extensive/Widespread"),l.a.createElement("option",{value:"3-Moderate/Limited"},"3-Moderate/Limited")))),l.a.createElement(P.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Reporter"),l.a.createElement(T.a.Control,{type:"text",size:"sm",placeholder:"Who reported the issue.",onChange:function(e){return L(e.target.value)},required:!0}))),l.a.createElement(P.a,{md:6,lg:4,className:"animated zoomIn faster"},l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Resolver"),l.a.createElement(T.a.Control,{type:"text",size:"sm",placeholder:"Who is working on the issue.",onChange:function(e){return M(e.target.value)},required:!0})))),l.a.createElement(B.a,{variant:"primary",type:"submit",size:"sm",className:"mt-5 mb-5 animated zoomIn faster"},"Submit"))))},ee=t(104),ae=t.n(ee),te=t(105),ne=t.n(te),le=function(){var e=Object(n.useContext)(b),a=Object(o.a)(e,1)[0],t=Object(n.useRef)(),r=Object(n.useRef)(),c=[{name:"Jan",out:0},{name:"Feb",out:0},{name:"Mar",out:0},{name:"Apr",out:0},{name:"May",out:0},{name:"Jun",out:0},{name:"Jul",out:0},{name:"Aug",out:0},{name:"Sep",out:0},{name:"Oct",out:0},{name:"Nov",out:0},{name:"Dec",out:0}];Object(n.useEffect)(function(){var e=new Date((new Date).setFullYear((new Date).getFullYear()-1));a.forEach(function(a){if(a.end){var t=new Date(Date.parse(a.start)),n=new Date(Date.parse(a.end)),l=Math.floor(n-t);t>e&&(c[t.getMonth()].out+=l)}});for(var n=(new Date).getMonth(),l=0;l<n+1;l++)c.push(c.shift());c.reverse();var o=new ae.a(t.current.getContext("2d"),{type:"bar",data:{labels:a.slice(0,7).map(function(e,a){return a+1}),datasets:[{backgroundColor:"#6c757d",data:a.slice(0,7).map(function(e){return i(e.start,e.end)})}]},options:{legend:{display:!1},scales:{xAxes:[{barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,gridLines:{offsetGridLines:!0}}],yAxes:[{ticks:{callback:function(e){return"".concat(m.a.duration(e,"milliseconds").humanize())}}}]}}});console.log(o);var s=new ae.a(r.current.getContext("2d"),{type:"line",data:{labels:c.map(function(e){return e.name}),datasets:[{label:"Year on year",backgroundColor:"#6c757d",data:c.map(function(e){return e.out})}]},options:{legend:{display:!1},scales:{xAxes:[{barPercentage:.5,barThickness:6,maxBarThickness:8,minBarLength:2,gridLines:{offsetGridLines:!0}}],yAxes:[{ticks:{callback:function(e){return"".concat(m.a.duration(e,"milliseconds").humanize())}}}]}}});console.log(s)});var i=function(e,a){var t=new Date(a).getTime(),n=new Date(e).getTime();return Math.floor(t-n)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{fluid:!0,className:"mb-5 text-light bg-secondary"},l.a.createElement(j.a,null,l.a.createElement("h1",{className:"display-4"},"Dashboard"),l.a.createElement("p",{className:"lead"},"/\u02c8da\u0283b\u0254\u02d0d/ 1. A graphical summary of various pieces of important information, typically used to give an overview of a business."),l.a.createElement("hr",{className:"my-4"}))),l.a.createElement(j.a,null,a?l.a.createElement(G.a,{className:"mb-5 mt-5"},l.a.createElement(P.a,{lg:8,className:"animated zoomIn faster"},l.a.createElement("div",{className:"animated zoomIn faster"},l.a.createElement("canvas",{ref:t})),l.a.createElement("div",{className:"animated zoomIn faster mb-5 mt-5"},l.a.createElement("canvas",{ref:r}))),l.a.createElement(P.a,{lg:4,className:"animated zoomIn faster"},l.a.createElement(ne.a,null,a.slice(0,7).map(function(e,a){return l.a.createElement(ne.a.Item,{key:a},l.a.createElement("div",{className:"d-flex w-100 justify-content-between"},l.a.createElement("h6",{className:"mb-1"},a+1,". ",e.application)),l.a.createElement("small",null,e.startText),l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},e.outageText))})))):null))},re=function(){var e=Object(n.useContext)(p),a=Object(o.a)(e,2)[1],t=Object(n.useState)("We'll never share your email with anyone else."),r=Object(o.a)(t,2),c=r[0],i=r[1],s=Object(n.useState)("text-muted"),m=Object(o.a)(s,2),u=m[0],d=m[1],b=Object(n.useState)(""),f=Object(o.a)(b,2),g=f[0],v=f[1],h=Object(n.useState)(""),y=Object(o.a)(h,2),O=y[0],x=y[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(I.a,{className:"mb-5"},l.a.createElement(j.a,null,l.a.createElement("h1",{className:"display-4"},"SUNRXS"),l.a.createElement("p",{className:"lead"},"Report Management Tool"),l.a.createElement("hr",{className:"my-4"}),l.a.createElement("p",null,"Use the below form to login into your account."))),l.a.createElement(j.a,null,l.a.createElement(T.a,{onSubmit:function(e){e.preventDefault(),E.auth().signInWithEmailAndPassword(g,O).then(function(e){return a(e)}).catch(function(e){i(e.message),d("text-danger")})}},l.a.createElement(G.a,null,l.a.createElement(P.a,{lg:4,md:6},l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Email address"),l.a.createElement(T.a.Control,{type:"email",placeholder:"Enter email",name:"email",onChange:function(e){return v(e.target.value)},required:!0}),l.a.createElement(T.a.Text,{className:"".concat(u)},c))),l.a.createElement(P.a,{lg:4,md:6},l.a.createElement(T.a.Group,null,l.a.createElement(T.a.Label,null,"Password"),l.a.createElement(T.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:function(e){return x(e.target.value)},required:!0})))),l.a.createElement(B.a,{type:"submit",variant:"primary",size:"sm",className:"mt-5 mb-5"},"Login"))))};c.a.render(l.a.createElement(function(e){var a=e.children,t=Object(n.useState)(null),r=Object(o.a)(t,2),c=r[0],i=r[1];return Object(n.useEffect)(function(){return E.auth().onAuthStateChanged(function(e){i(e||null)})}),l.a.createElement(p.Provider,{value:[c,i]},a)},null,l.a.createElement(function(e){var a=e.children,t=Object(n.useState)([{actions:"loading",application:"loading",description:"loading",end:"Jun 1 2019 5:07:00 GMT+0200 (SAST)",id:"INC1554937984145",impact:"loading",priority:"loading",reporter:"loading",resolver:"loading",start:"Jun 1 2019 5:07:00 GMT+0200 (SAST)"}]),r=Object(o.a)(t,2),c=r[0],s=r[1];return Object(n.useEffect)(function(){E.database().ref().child("incidents").on("value",function(e){var a=Object.values(e.val());a=a.map(function(e){var a,t,n="Open",l=new m.a(new Date(e.end)),r=new m.a(new Date(e.start)),c={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return a=new Date(Date.parse(e.start)).toLocaleDateString("en-US",c),t=new Date(Date.parse(e.end)).toLocaleDateString("en-US",c),n=e.end?"Resolved ".concat(l.from(r)):"Open",Object(i.a)({},e,{outageText:n,startText:a,endText:t})}),s(a)})},[]),l.a.createElement(b.Provider,{value:[c,s]},a)},null,l.a.createElement(function(){var e=Object(n.useContext)(p);return Object(o.a)(e,1)[0]?l.a.createElement(f.a,null,l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement("div",{className:"animated fadeInUp faster"},l.a.createElement(g.a,{exact:!0,path:"/",strict:!0,component:le}),l.a.createElement(g.a,{exact:!0,path:"/incidents/",strict:!0,component:Z}),l.a.createElement(g.a,{exact:!0,path:"/new_incident/",strict:!0,component:$})))):l.a.createElement(re,null)},null))),document.getElementById("root"))}},[[155,2,1]]]);
//# sourceMappingURL=main.fce65c75.chunk.js.map